<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>K2GB IA | DIAGNOSTIC</title>
    <style>
        body { background: #020; color: #0f0; font-family: monospace; padding: 20px; }
        .card { background: #000; padding: 20px; border: 1px solid #0f0; border-radius: 10px; }
        button { background: #0f0; color: #000; padding: 10px; border: none; cursor: pointer; font-weight: bold; width: 100%; }
        pre { background: #111; padding: 10px; color: #0f0; overflow: auto; max-height: 400px; }
    </style>
</head>
<body>
    <div class="card">
        <h1>DIAGNOSTIC K2GB (VERT)</h1>
        <p>On va forcer Google à nous dire quel modèle il accepte pour ta clé.</p>
        <button onclick="diagnostiquer()">LANCER LE SCAN</button>
        <h3>RÉSULTAT :</h3>
        <pre id="output">Clique sur le bouton vert...</pre>
    </div>

<script>
    async function diagnostiquer() {
        const output = document.getElementById('output');
        const API_KEY = "AIzaSyBgi3bizPYDaI8iTRRnGHJvj9wEGS8OhRo";
        output.innerText = "Scan en cours...";

        try {
            // On demande à Google : "Quels modèles puis-je utiliser ?"
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${API_KEY}`);
            const data = await response.json();

            if (data.models) {
                // On cherche un modèle qui accepte "generateContent"
                const modelList = data.models.map(m => m.name.replace('models/', ''));
                output.innerText = "MODÈLES DISPONIBLES POUR TA CLÉ :\n\n" + modelList.join("\n");
                console.log(data);
            } else {
                output.innerText = "ERREUR : " + JSON.stringify(data.error);
            }
        } catch (e) {
            output.innerText = "ERREUR RÉSEAU : " + e.message;
        }
    }
</script>
</body>
</html>
